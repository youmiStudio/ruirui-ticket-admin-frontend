var te=Object.defineProperty,ue=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var T=(r,e,l)=>e in r?te(r,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[e]=l,f=(r,e)=>{for(var l in e||(e={}))oe.call(e,l)&&T(r,l,e[l]);if(N)for(var l of N(e))se.call(e,l)&&T(r,l,e[l]);return r},I=(r,e)=>ue(r,ae(e));import{d as le,r as E,c as _,a4 as re,o as ne,w as ie,e as ce,h as F,i as y,k as t,l as o,m as a,aD as de,al as me,aB as _e,n as M,bV as pe,t as g,bW as fe,a_ as Ee,bX as Fe,j as C,au as h,q as ge,dM as he,x as be,bn as ve,E as De,bR as Be,bS as ye,g as Ce,bZ as ke,_ as xe}from"./index.f2f4e5af.js";import{E as Re}from"./card.2dd1dae5.js";import{_ as Ae}from"./index.fac30f52.js";import{_ as Ve}from"./index.68adca3c.js";import{E as we}from"./image-viewer.3fecd8e6.js";import{E as Ne,a as Te}from"./form-item.24d4e3f5.js";import{E as Ie,a as Me}from"./col.f1267745.js";import{E as qe}from"./date-picker.24382570.js";import{u as $e}from"./useDictTypes.39a9cb05.js";import{r as Se,g as Ue,a as Ye,b as je,e as Le,c as Oe}from"./index.517ccbac.js";import{v as Pe}from"./index.06d45199.js";import"./empty.ab6a681e.js";import"./index.aa9b144d.js";const ze={class:"app-container"},We={class:"car-info"},Xe={class:"name"},Ze={key:0,class:"describe"},Ge=le({__name:"index",setup(r){const e=E({title:"\u8DEF\u7EBF",id:"routeId",isAsc:"desc",orderByColumn:"route_id",api:{list:Se,get:Ue,add:Ye,remove:je,edit:Le,export:Oe},authorites:{list:"ticket:route:list",get:"ticket:route:query",add:"ticket:route:add",edit:"ticket:route:edit",remove:"ticket:route:remove",export:"ticket:route:export"}}),l=$e("sys_route_status"),b=_(),q=_(),k=_();_(!1);const x=_(!0),$=_([]),p=_([]),R=re(()=>p.value?{beginTime:p.value[0]||"",endTime:p.value[1]||""}:{}),d=E({routeName:"",status:""});E({routeName:[{required:!0,message:"\u8DEF\u7EBF\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:2,max:20,message:"\u8DEF\u7EBF\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],routeDescribe:[{required:!0,message:"\u8DEF\u7EBF\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u5FC5\u987B\u9009\u62E9",trigger:"blur"}]});let v=E({routeId:void 0,routeName:"",routeDescribe:"",status:"0",remark:""});const A=E({title:"",dialogVisible:!1});ne(()=>{i()}),ie($,u=>{S(u.length)},{deep:!0});const i=ce(()=>{const u=Object.assign({},f(f({},d),R.value));b.value&&b.value.search(u)},200);function S(u){if(u>0){x.value=!1;return}x.value=!0}function U(u){return e.api.list(I(f(f(f({},d),R.value),u),{orderByColumn:e.orderByColumn,isAsc:e.isAsc}))}function Y(){P(),A.title=`\u6DFB\u52A0${e.title}`,A.dialogVisible=!0}function j(u){he.push(`/ticket/route/detail/${u.routeId}`)}function L(u){O(u[e.id]).then(()=>{i(),be.success("\u5220\u9664\u6210\u529F")})}function O(u){return new Promise((n,D)=>{ve.confirm(`\u786E\u5B9A\u8981\u5220\u9664${e.title}\u7F16\u53F7[${u}]\u7684\u6570\u636E\u9879\u5417\uFF1F`,"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.api.remove(u).then(c=>{const{code:m}=c;m===200?n(c):D(c)})}).catch(()=>{})})}function P(){var u;(u=q.value)==null||u.resetFields(),Object.keys(v).forEach(n=>{v[n]=null}),v.status="0"}function z(){var u;(u=k.value)==null||u.resetFields()}function W(){z(),i()}return(u,n)=>{const D=De,c=Ne,m=Ie,X=qe,V=Be,Z=ye,B=Ce,w=Me,G=Te,H=we,J=ke,K=Ve,Q=Ae,ee=Re;return F(),y("div",ze,[t(ee,{class:"mb-10px",shadow:"never"},{default:o(()=>[t(G,{ref_key:"searchFormRef",ref:k,model:a(d)},{default:o(()=>[t(w,{gutter:20},{default:o(()=>[t(m,{span:8},{default:o(()=>[t(c,{label:"\u8DEF\u7EBF\u540D\u79F0",prop:"routeName"},{default:o(()=>[t(D,{modelValue:a(d).routeName,"onUpdate:modelValue":n[0]||(n[0]=s=>a(d).routeName=s),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u540D\u79F0",clearable:"",maxlength:"20",onClear:a(i),onChange:a(i)},null,8,["modelValue","onClear","onChange"])]),_:1})]),_:1}),t(m,{span:8},{default:o(()=>[t(c,{label:"\u51FA\u884C\u65F6\u95F4"},{default:o(()=>[t(X,{class:"w100%",modelValue:a(p),"onUpdate:modelValue":n[1]||(n[1]=s=>de(p)?p.value=s:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",onChange:a(i)},null,8,["modelValue","onChange"])]),_:1})]),_:1}),t(m,{span:8},{default:o(()=>[t(c,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[t(Z,{class:"w100%",modelValue:a(d).status,"onUpdate:modelValue":n[2]||(n[2]=s=>a(d).status=s),placeholder:"\u8DEF\u7EBF\u72B6\u6001",onChange:a(i)},{default:o(()=>[t(V,{label:"\u5168\u90E8",value:""}),(F(!0),y(me,null,_e(a(l).type.sys_route_status,s=>(F(),M(V,{label:s.label,value:s.value,key:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1}),t(m,{span:6},{default:o(()=>[t(c,null,{default:o(()=>[t(B,{type:"primary",icon:a(pe),onClick:a(i)},{default:o(()=>[g("\u67E5\u8BE2")]),_:1},8,["icon","onClick"]),t(B,{icon:a(fe),onClick:W},{default:o(()=>[g("\u91CD\u7F6E")]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),t(w,{gutter:10},{default:o(()=>[t(m,{span:1.5},{default:o(()=>[Ee((F(),M(B,{type:"primary",plain:"",size:"small",icon:a(Fe),onClick:Y},{default:o(()=>[g("\u65B0\u589E")]),_:1},8,["icon"])),[[a(Pe),[a(e).authorites.add]]])]),_:1},8,["span"])]),_:1}),t(Q,{ref_key:"tableRef",ref:b,url:U,authority:{edit:[a(e).authorites.edit],delete:[a(e).authorites.remove]},onEdit:j,onDelete:L},{default:o(({element:s})=>[C("div",null,[t(H,{src:s.mainImgUrl},null,8,["src"]),C("div",We,[t(J,{type:"warning"},{default:o(()=>[g(h(s.beginTime)+"\u81F3"+h(s.endTime),1)]),_:2},1024),t(K,{class:"ml-5px",style:{display:"inline-block"},options:a(l).type.sys_route_status,value:s.status},null,8,["options","value"]),C("div",Xe,h(s.routeName),1),s.routeDescribe?(F(),y("div",Ze,h(s.routeDescribe),1)):ge("",!0)])])]),_:1},8,["authority"])]),_:1})])}}});const ct=xe(Ge,[["__scopeId","data-v-664953b2"]]);export{ct as default};
