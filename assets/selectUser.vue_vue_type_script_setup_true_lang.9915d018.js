var G=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var V=(s,t,u)=>t in s?G(s,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[t]=u,v=(s,t)=>{for(var u in t||(t={}))K.call(t,u)&&V(s,u,t[u]);if(k)for(var u of k(t))O.call(t,u)&&V(s,u,t[u]);return s},A=(s,t)=>H(s,J(t));import{d as Q,r as R,c as f,a as X,w as Y,h as w,n as T,l as o,j as x,k as e,t as b,a_ as Z,m as a,bV as ee,bW as ae,au as oe,aC as te,aD as le,e as ue,x as ne,E as se,g as re,bp as ie,bh as ce}from"./index.f2f4e5af.js";import{_ as me}from"./index.68adca3c.js";import{E as pe,a as de}from"./form-item.24d4e3f5.js";import{E as _e,a as fe}from"./col.f1267745.js";import{T as he}from"./index.f4ef202d.js";import{u as be}from"./useDictTypes.39a9cb05.js";import{v as Ce}from"./index.06d45199.js";import{u as ge,d as Fe}from"./index.bf800284.js";const ye={class:"dialog-footer"},Te=Q({__name:"selectUser",emits:["ok"],setup(s,{expose:t,emit:u}){t({show:$});const c=R({id:"userId",isAsc:"desc",orderByColumn:"user_id",api:{list:ge},authorites:{edit:"system:role:edit"}}),m=f(!1),C=f(),B=f(),g=f([]),E=f(!0),D=X(),I=be("sys_common_status"),p=R({username:"",phoneNumber:"",roleId:D.params.roleId});Y(g,l=>{L(l.length)},{deep:!0});const i=ue(()=>{C.value&&C.value.search(v({},p))},200);function N(l){return c.api.list(A(v({},l),{orderByColumn:c.orderByColumn,isAsc:c.isAsc}))}function U(){var l;(l=B.value)==null||l.resetFields()}function S(l){g.value=l}function j(){U(),i()}function L(l){if(l>0){E.value=!1;return}E.value=!0}function $(){m.value=!0,i()}function M(){const l=g.value.map(d=>d[c.id]),r=D.params.roleId;Fe({roleId:r,userIds:l.join(",")}).then(d=>{m.value=!1,ne.success("\u6DFB\u52A0\u6210\u529F"),u("ok")})}return(l,r)=>{const d=se,F=pe,y=_e,h=re,P=fe,W=de,_=ie,q=me,z=ce;return w(),T(z,{modelValue:a(m),"onUpdate:modelValue":r[3]||(r[3]=n=>le(m)?m.value=n:null),title:"\u9009\u62E9\u7528\u6237",width:"800px",top:"10vh","append-to-body":""},{footer:o(()=>[x("span",ye,[e(h,{onClick:r[2]||(r[2]=n=>m.value=!1)},{default:o(()=>[b("\u53D6\u6D88")]),_:1}),Z((w(),T(h,{type:"primary",onClick:M},{default:o(()=>[b(" \u786E\u5B9A ")]),_:1})),[[a(Ce),[a(c).authorites.edit]]])])]),default:o(()=>[e(W,{ref_key:"searchFormRef",ref:B,model:a(p)},{default:o(()=>[e(P,{gutter:20},{default:o(()=>[e(y,{span:8},{default:o(()=>[e(F,{label:"\u7528\u6237\u540D\u79F0",prop:"username"},{default:o(()=>[e(d,{modelValue:a(p).username,"onUpdate:modelValue":r[0]||(r[0]=n=>a(p).username=n),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",maxlength:"20",onClear:a(i),onChange:a(i)},null,8,["modelValue","onClear","onChange"])]),_:1})]),_:1}),e(y,{span:8},{default:o(()=>[e(F,{label:"\u624B\u673A\u53F7\u7801",prop:"phoneNumber"},{default:o(()=>[e(d,{modelValue:a(p).phoneNumber,"onUpdate:modelValue":r[1]||(r[1]=n=>a(p).phoneNumber=n),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",clearable:"",maxlength:"11",onClear:a(i),onChange:a(i)},null,8,["modelValue","onClear","onChange"])]),_:1})]),_:1}),e(y,{span:6},{default:o(()=>[e(F,null,{default:o(()=>[e(h,{type:"primary",icon:a(ee),onClick:a(i)},{default:o(()=>[b("\u67E5\u8BE2")]),_:1},8,["icon","onClick"]),e(h,{icon:a(ae),onClick:j},{default:o(()=>[b("\u91CD\u7F6E")]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(he,{ref_key:"tableRef",ref:C,url:N,"primary-key":a(c).id,onSelectChange:S},{default:o(()=>[e(_,{label:"\u7528\u6237\u540D\u79F0",prop:"username",align:"center"}),e(_,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname",align:"center"}),e(_,{label:"\u624B\u673A",prop:"phoneNumber",align:"center"}),e(_,{label:"\u72B6\u6001",align:"center"},{default:o(({row:n})=>[e(q,{options:a(I).type.sys_common_status,value:n.status},null,8,["options","value"])]),_:1}),e(_,{label:"\u521B\u5EFA\u65F6\u95F4",width:"150px",align:"center"},{default:o(({row:n})=>[x("span",null,oe(n.createTime&&a(te)(n.createTime,"{y}-{m}-{d} {h}:{i}")),1)]),_:1})]),_:1},8,["primary-key"])]),_:1},8,["modelValue"])}}});export{Te as _};
