var H=Object.defineProperty,J=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var A=(s,u,c)=>u in s?H(s,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[u]=c,b=(s,u)=>{for(var c in u||(u={}))Y.call(u,c)&&A(s,c,u[c]);if(x)for(var c of x(u))Z.call(u,c)&&A(s,c,u[c]);return s},R=(s,u)=>J(s,Q(u));import{d as ee,r as V,dK as te,dL as ae,c as p,b as oe,am as se,w as ne,e as ue,h,i as N,k as t,l as o,m as e,n as f,al as ce,aB as le,q as M,bV as ie,t as g,bW as re,a_ as me,bX as de,j as k,au as _e,x as pe,E as he,bR as fe,bS as ke,g as ve,bn as Ee,_ as ye}from"./index.f2f4e5af.js";import{E as be}from"./card.2dd1dae5.js";import{_ as ge}from"./index.fac30f52.js";import{_ as Be}from"./index.68adca3c.js";import{E as Fe,a as Ce}from"./form-item.24d4e3f5.js";import{E as Se,a as De}from"./col.f1267745.js";import{u as we}from"./useDictTypes.39a9cb05.js";import{v as xe}from"./index.06d45199.js";import Ae from"./PositionView.a5bf39a6.js";import"./empty.ab6a681e.js";import"./image-viewer.3fecd8e6.js";const Re={class:"app-container"},Ve={class:"table-view"},Ne={class:"info"},Me={class:"mt-10px"},Ie={class:"name"},Te=ee({__name:"index",props:{checkMode:{type:Boolean,default:!1}},emits:["check"],setup(s,{emit:u}){const c=s,l=V({title:"\u5EA7\u4F4D\u65B9\u6848",id:"seatSchemeId",isAsc:"desc",orderByColumn:"seat_scheme_id",api:{list:te,remove:ae},authorites:{list:"ticket:seatScheme:list",get:"ticket:seatScheme:query",add:"ticket:seatScheme:add",edit:"ticket:seatScheme:edit",remove:"ticket:seatScheme:remove",export:"ticket:seatScheme:export"}}),B=we(["sys_common_status"]),v=p();p();const F=p();p(!1);const C=p(!0),I=p([]),d=V({seatSchemeName:"",carNo:"",status:c.checkMode?"0":""}),S=oe();se(()=>{r()}),ne(I,a=>{P(a.length)},{deep:!0});const r=ue(()=>{v.value&&v.value.search()},200),T=()=>{S.push("/ticket/seat-scheme/add")},L=a=>{S.push(`/ticket/seat-scheme/edit/${a.seatSchemeId}`)};function P(a){if(a>0){C.value=!1;return}C.value=!0}function $(a){return l.api.list(R(b(b({},a),d),{orderByColumn:l.orderByColumn,isAsc:l.isAsc}))}function q(){var a;(a=F.value)==null||a.resetFields()}function U(a){return new Promise((i,E)=>{Ee.confirm(`\u786E\u5B9A\u8981\u5220\u9664${l.title}\u7F16\u53F7[${a}]\u7684\u6570\u636E\u9879\u5417\uFF1F`,"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{l.api.remove(a).then(m=>{const{code:_}=m;_===200?i(m):E(m)})}).catch(()=>{})})}function j(a){U(a[l.id]).then(()=>{r(),pe.success("\u5220\u9664\u6210\u529F")})}function z(){q(),r()}return(a,i)=>{const E=he,m=Fe,_=Se,D=fe,K=ke,y=ve,w=De,O=Ce,W=Be,X=ge,G=be;return h(),N("div",Re,[t(G,{class:"mb-10px",shadow:"never"},{default:o(()=>[t(O,{ref_key:"searchFormRef",ref:F,model:e(d)},{default:o(()=>[t(w,{gutter:20},{default:o(()=>[t(_,{span:8},{default:o(()=>[t(m,{label:"\u5EA7\u4F4D\u65B9\u6848\u540D\u79F0",prop:"carName"},{default:o(()=>[t(E,{modelValue:e(d).seatSchemeName,"onUpdate:modelValue":i[0]||(i[0]=n=>e(d).seatSchemeName=n),placeholder:"\u8BF7\u8F93\u5165\u5EA7\u4F4D\u65B9\u6848",clearable:"",maxlength:"100",onClear:e(r),onChange:e(r)},null,8,["modelValue","onClear","onChange"])]),_:1})]),_:1}),s.checkMode?M("",!0):(h(),f(_,{key:0,span:8},{default:o(()=>[t(m,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[t(K,{class:"w100%",modelValue:e(d).status,"onUpdate:modelValue":i[1]||(i[1]=n=>e(d).status=n),placeholder:"\u5EA7\u4F4D\u65B9\u6848\u72B6\u6001",onChange:e(r)},{default:o(()=>[t(D,{label:"\u5168\u90E8",value:""}),(h(!0),N(ce,null,le(e(B).type.sys_common_status,n=>(h(),f(D,{label:n.label,value:n.value,key:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1})),t(_,{span:8},{default:o(()=>[t(m,null,{default:o(()=>[t(y,{type:"primary",icon:e(ie),onClick:e(r)},{default:o(()=>[g("\u67E5\u8BE2")]),_:1},8,["icon","onClick"]),t(y,{icon:e(re),onClick:z},{default:o(()=>[g("\u91CD\u7F6E")]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),s.checkMode?M("",!0):(h(),f(w,{key:0,gutter:10},{default:o(()=>[t(_,{span:1.5},{default:o(()=>[me((h(),f(y,{type:"primary",plain:"",size:"small",icon:e(de),onClick:T},{default:o(()=>[g("\u65B0\u589E")]),_:1},8,["icon"])),[[e(xe),[e(l).authorites.add]]])]),_:1},8,["span"])]),_:1})),t(X,{ref_key:"tableRef",ref:v,url:$,authority:{edit:[e(l).authorites.edit],delete:[e(l).authorites.remove]},"show-delete":!s.checkMode,"show-setting":!s.checkMode,onClick:i[2]||(i[2]=n=>{u("check",n)}),onEdit:L,onDelete:j},{default:o(({element:n,index:Le})=>[k("div",Ve,[t(Ae,{image:n.carPlaneImage,icon:n.unSelectedIcon,positions:n.positions},null,8,["image","icon","positions"]),k("div",Ne,[t(W,{style:{display:"inline-block"},options:e(B).type.sys_common_status,value:n.status},null,8,["options","value"]),k("div",Me,[k("span",Ie,"\u65B9\u6848\u540D\u79F0\uFF1A"+_e(n.seatSchemeName),1)])])])]),_:1},8,["authority","show-delete","show-setting"])]),_:1})])}}});const Je=ye(Te,[["__scopeId","data-v-950b8f60"]]);export{Je as default};
