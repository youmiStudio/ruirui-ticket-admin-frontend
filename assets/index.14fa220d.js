var I=(u,w,f)=>new Promise((x,g)=>{var y=l=>{try{r(f.next(l))}catch(d){g(d)}},a=l=>{try{r(f.throw(l))}catch(d){g(d)}},r=l=>l.done?x(l.value):Promise.resolve(l.value).then(y,a);r((f=f.apply(u,w)).next())});import{d as M,u as N,a as O,b as T,r as F,c as _,w as j,o as Q,e as W,E as z,f as H,g as L,h as C,i as Y,j as m,k as p,l as c,m as t,n as R,p as E,q as Z,s as G,t as J,v as X,x as ee,y as te,z as oe,_ as se}from"./index.f2f4e5af.js";import{E as ae,a as ne}from"./form-item.24d4e3f5.js";const ue=""+new URL("login_banner.f486a959.jpg",import.meta.url).href;var A=(u=>(u.PASSWORD="password",u.EMPTY="",u))(A||{});const U=u=>(te("data-v-68d4bdfe"),u=u(),oe(),u),re={class:"login-container"},le={class:"login-box"},de={class:"login-form"},ie=U(()=>m("ul",{class:"list-none p0 m0 mb60px"},[m("li",{class:"tab mr20 tab-active"},"\u5BC6\u7801\u767B\u5F55")],-1)),pe=["src"],ce=U(()=>m("div",{class:"w320px h500px bg-white bg flex items-center"},[m("img",{src:ue,class:"w100%"})],-1)),me=M({__name:"index",setup(u){const w=(s,e,o)=>{e?o():o(new Error("\u8BF7\u8F93\u5165\u7528\u6237\u540D"))},f=(s,e,o)=>{e.length<6?o(new Error("\u5BC6\u7801\u81F3\u5C116\u4E2A\u5B57\u7B26")):o()},x=N(),g=O(),y=T(),a=F({username:"admin",password:"123456",code:"",uuid:""}),r=F({captchaEnabled:!0,img:"",uuid:""}),l=F({username:[{required:!0,trigger:"blur",validator:w}],password:[{required:!0,trigger:"blur",validator:f}],code:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}]}),d=_(),h=_(!1),B=_(!1);_(!1);const V=_(A.PASSWORD);let k,S={};j(()=>g.query,s=>{k=s.redirect,S=D(s)},{immediate:!0}),Q(()=>{v()});const v=W(()=>{X().then(s=>{const{captchaEnabled:e,uuid:o,img:i}=s.data;r.captchaEnabled=e,r.uuid=o,a.uuid=o,r.img=`data:image/gif;base64,${i}`})},300);function $(s){const{key:e}=s;B.value=e&&e.length===1&&e>="A"&&e<="Z"}function b(s){return!s||!r.uuid?!1:(s.validate(e=>I(this,null,function*(){if(e){h.value=!0;const o=yield x.login(a),{data:i}=o;i&&i.token?(ee({type:"success",message:"\u767B\u5F55\u6210\u529F"}),y.push({path:k||"/",query:S})):(a.code="",v(),h.value=!1)}else return console.log("error submit!!"),!1})),!0)}function D(s){return Object.keys(s).reduce((e,o)=>(o!=="redirect"&&(e[o]=s[o]),e),{})}return(s,e)=>{const o=z,i=ae,P=H,q=L,K=ne;return C(),Y("div",re,[m("div",le,[m("div",de,[ie,p(K,{ref_key:"ruleFormRef",ref:d,model:t(a),rules:t(l),autocomplete:"on","label-position":"left"},{default:c(()=>[p(i,{prop:"username"},{default:c(()=>[p(o,{ref:"username",modelValue:t(a).username,"onUpdate:modelValue":e[0]||(e[0]=n=>t(a).username=n),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])]),_:1}),p(P,{visible:t(B),content:"\u5927\u5199\u9501\u5B9A\u6253\u5F00",placement:"right",manual:""},{default:c(()=>[p(i,{prop:"password"},{default:c(()=>[(C(),R(o,{key:t(V),ref:"password",modelValue:t(a).password,"onUpdate:modelValue":e[1]||(e[1]=n=>t(a).password=n),type:t(V),placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on","show-password":!0,onKeyup:[$,e[3]||(e[3]=E(n=>b(t(d)),["enter","native"]))],onBlur:e[2]||(e[2]=n=>B.value=!1)},null,8,["modelValue","type"]))]),_:1})]),_:1},8,["visible"]),t(r).captchaEnabled?(C(),R(i,{key:0,prop:"code"},{default:c(()=>[p(o,{class:"flex-1",modelValue:t(a).code,"onUpdate:modelValue":e[4]||(e[4]=n=>t(a).code=n),placeholder:"\u9A8C\u8BC1\u7801",onKeyup:e[5]||(e[5]=E(n=>b(t(d)),["enter"]))},null,8,["modelValue"]),m("img",{class:"h35px ml10px",src:t(r).img,onClick:e[6]||(e[6]=(...n)=>t(v)&&t(v)(...n))},null,8,pe)]),_:1})):Z("",!0),p(i,null,{default:c(()=>[p(q,{loading:t(h),type:"primary",color:"#155bd4",style:{width:"100%",height:"48px"},onClick:e[7]||(e[7]=G(n=>b(t(d)),["prevent"])),onKeyup:e[8]||(e[8]=E(n=>b(t(d)),["enter"]))},{default:c(()=>[J(" \u767B\u5F55 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),ce])])}}});const ve=se(me,[["__scopeId","data-v-68d4bdfe"]]);export{ve as default};
