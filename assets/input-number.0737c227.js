var ce=Object.defineProperty,de=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var Y=(t,o,u)=>o in t?ce(t,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[o]=u,j=(t,o)=>{for(var u in o||(o={}))pe.call(o,u)&&Y(t,u,o[u]);if(W)for(var u of W(o))be.call(o,u)&&Y(t,u,o[u]);return t},q=(t,o)=>de(t,me(o));import{Z as fe,aO as ve,aA as m,c1 as ne,c5 as A,bk as I,c0 as y,d as te,aP as Ne,a6 as Ve,c as he,r as ye,aQ as Ie,a4 as h,b1 as _,a5 as we,c2 as ge,w as Ee,o as _e,aj as Se,h as f,i as z,a_ as H,m as a,ac as K,p as S,k as M,l as Q,n as P,b0 as Pe,c6 as ke,aV as X,q as Z,a$ as Ae,bX as Fe,s as k,E as Ce,ad as xe,a2 as Be,a7 as J,aw as Te}from"./index.f2f4e5af.js";import{v as ee}from"./index.aa9b144d.js";const De=fe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ve,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||m(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),ze={[ne]:(t,o)=>o!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[A]:t=>m(t)||I(t),[y]:t=>m(t)||I(t)},Ke=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe=te({name:"ElInputNumber"}),Ue=te(q(j({},Oe),{props:De,emits:ze,setup(t,{expose:o,emit:u}){const l=t,{t:O}=Ne(),p=Ve("input-number"),N=he(),i=ye({currentValue:l.modelValue,userInput:null}),{formItem:v}=Ie(),U=h(()=>m(l.modelValue)&&l.modelValue<=l.min),$=h(()=>m(l.modelValue)&&l.modelValue>=l.max),ae=h(()=>{const e=L(l.step);return _(l.precision)?Math.max(L(l.modelValue),e):(e>l.precision,l.precision)}),F=h(()=>l.controls&&l.controlsPosition==="right"),G=we(),V=ge(),C=h(()=>{if(i.userInput!==null)return i.userInput;let e=i.currentValue;if(I(e))return"";if(m(e)){if(Number.isNaN(e))return"";_(l.precision)||(e=e.toFixed(l.precision))}return e}),x=(e,n)=>{if(_(n)&&(n=ae.value),n===0)return Math.round(e);let r=String(e);const c=r.indexOf(".");if(c===-1||!r.replace(".","").split("")[c+n])return e;const g=r.length;return r.charAt(g-1)==="5"&&(r=`${r.slice(0,Math.max(0,g-1))}6`),Number.parseFloat(Number(r).toFixed(n))},L=e=>{if(I(e))return 0;const n=e.toString(),r=n.indexOf(".");let c=0;return r!==-1&&(c=n.length-r-1),c},R=(e,n=1)=>m(e)?x(e+l.step*n):i.currentValue,B=()=>{if(l.readonly||V.value||$.value)return;const e=Number(C.value)||0,n=R(e);w(n),u(A,i.currentValue)},T=()=>{if(l.readonly||V.value||U.value)return;const e=Number(C.value)||0,n=R(e,-1);w(n),u(A,i.currentValue)},D=(e,n)=>{const{max:r,min:c,step:s,precision:b,stepStrictly:g,valueOnClear:E}=l;let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(E===null)return null;d=Be(E)?{min:c,max:r}[E]:E}return g&&(d=x(Math.round(d/s)*s,b)),_(b)||(d=x(d,b)),(d>r||d<c)&&(d=d>r?r:c,n&&u(y,d)),d},w=(e,n=!0)=>{var r;const c=i.currentValue,s=D(e);if(!n){u(y,s);return}c!==s&&(i.userInput=null,u(y,s),u(ne,s,c),l.validateEvent&&((r=v==null?void 0:v.validate)==null||r.call(v,"change").catch(b=>J())),i.currentValue=s)},re=e=>{i.userInput=e;const n=e===""?null:Number(e);u(A,n),w(n,!1)},le=e=>{const n=e!==""?Number(e):"";(m(n)&&!Number.isNaN(n)||e==="")&&w(n),i.userInput=null},ue=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},se=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},oe=e=>{u("focus",e)},ie=e=>{var n;u("blur",e),l.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(r=>J()))};return Ee(()=>l.modelValue,e=>{const n=D(i.userInput),r=D(e,!0);!m(n)&&(!n||n!==r)&&(i.currentValue=r,i.userInput=null)},{immediate:!0}),_e(()=>{var e;const{min:n,max:r,modelValue:c}=l,s=(e=N.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(r)?s.setAttribute("aria-valuemax",String(r)):s.removeAttribute("aria-valuemax"),Number.isFinite(n)?s.setAttribute("aria-valuemin",String(n)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",String(i.currentValue)),s.setAttribute("aria-disabled",String(V.value)),!m(c)&&c!=null){let b=Number(c);Number.isNaN(b)&&(b=null),u(y,b)}}),Se(()=>{var e;const n=(e=N.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${i.currentValue}`)}),o({focus:ue,blur:se}),(e,n)=>(f(),z("div",{class:K([a(p).b(),a(p).m(a(G)),a(p).is("disabled",a(V)),a(p).is("without-controls",!e.controls),a(p).is("controls-right",a(F))]),onDragstart:n[1]||(n[1]=k(()=>{},["prevent"]))},[e.controls?H((f(),z("span",{key:0,role:"button","aria-label":a(O)("el.inputNumber.decrease"),class:K([a(p).e("decrease"),a(p).is("disabled",a(U))]),onKeydown:S(T,["enter"])},[M(a(X),null,{default:Q(()=>[a(F)?(f(),P(a(Pe),{key:0})):(f(),P(a(ke),{key:1}))]),_:1})],42,Ke)),[[a(ee),T]]):Z("v-if",!0),e.controls?H((f(),z("span",{key:1,role:"button","aria-label":a(O)("el.inputNumber.increase"),class:K([a(p).e("increase"),a(p).is("disabled",a($))]),onKeydown:S(B,["enter"])},[M(a(X),null,{default:Q(()=>[a(F)?(f(),P(a(Ae),{key:0})):(f(),P(a(Fe),{key:1}))]),_:1})],42,Me)),[[a(ee),B]]):Z("v-if",!0),M(a(Ce),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":a(C),placeholder:e.placeholder,readonly:e.readonly,disabled:a(V),size:a(G),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=k(()=>{},["prevent"])),onKeydown:[S(k(B,["prevent"]),["up"]),S(k(T,["prevent"]),["down"])],onBlur:ie,onFocus:oe,onInput:re,onChange:le},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}}));var $e=xe(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const We=Te($e);export{We as E};
