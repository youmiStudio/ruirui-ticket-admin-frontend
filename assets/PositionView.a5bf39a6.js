var k=Object.defineProperty;var x=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var V=(s,i,e)=>i in s?k(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e,f=(s,i)=>{for(var e in i||(i={}))$.call(i,e)&&V(s,e,i[e]);if(x)for(var e of x(i))b.call(i,e)&&V(s,e,i[e]);return s};var E=(s,i,e)=>new Promise((c,r)=>{var h=o=>{try{u(e.next(o))}catch(l){r(l)}},d=o=>{try{u(e.throw(o))}catch(l){r(l)}},u=o=>o.done?c(o.value):Promise.resolve(o.value).then(h,d);u((e=e.apply(s,i)).next())});import{d as q,c as g,w as m,o as C,h as _,i as w,k as I,j as R,al as j,aB as L,at as N,m as A,e as H,_ as M}from"./index.f2f4e5af.js";import{E as T}from"./image-viewer.3fecd8e6.js";const W={class:"seat-list"},X=["src"],Y=q({__name:"PositionView",props:{image:{type:String,require:!0},icon:{type:String,require:!0},positions:{type:Array,require:!0}},setup(s){const i=s,e=g([]),c=g(),r=g({width:-1,height:-1}),h=[{el:window,handle:"addEventListener",type:"resize",func:H(u,50)}];m(()=>i.positions,a=>{(!i.positions||i.positions.length===0)&&(e.value=[]),e.value=[],e.value=[...i.positions],o(),y()},{immediate:!0,deep:!0}),m(()=>r.value,()=>{y()},{deep:!0}),C(()=>{d()});function d(){o(),l()}function u(){return E(this,null,function*(){o()})}function o(){B().then(a=>{r.value.width=a.width,r.value.height=a.height})}function l(){h.forEach(a=>{a.el[a.handle](a.type,a.func)})}function y(){const{width:a,height:z}=r.value;e.value.forEach(t=>{var D,v,P,S;const{sizeData:n,positionData:G}=t;if(!n)return;const{parentWidth:F,parentHeight:J}=n,p=a/F;!t.firstPositionData&&!t.firstSize&&(t.firstPositionData=f({},t.positionData),t.firstSize=f({},t.sizeData)),t.sizeData.width=((D=t.firstSize)==null?void 0:D.width)*p,t.sizeData.height=((v=t.firstSize)==null?void 0:v.height)*p,t.positionData.x=((P=t.firstPositionData)==null?void 0:P.x)*p,t.positionData.y=((S=t.firstPositionData)==null?void 0:S.y)*p})}function B(){return new Promise((a,z)=>{const t=()=>{if(!c.value)return;const n=window.getComputedStyle(c.value);parseFloat(n.getPropertyValue("width"))===0?setTimeout(()=>{t()},50):a({width:parseFloat(n.getPropertyValue("width")),height:parseFloat(n.getPropertyValue("height"))})};t()})}return(a,z)=>{const t=T;return _(),w("div",{class:"relative",ref_key:"rootRef",ref:c},[I(t,{src:s.image},null,8,["src"]),R("div",W,[(_(!0),w(j,null,L(A(e),n=>(_(),w("img",{class:"seat",src:s.icon,style:N({width:`${n.sizeData.width}px`,height:`${n.sizeData.height}px`,top:`${n.positionData.y}px`,left:`${n.positionData.x}px`})},null,12,X))),256))])],512)}}});const U=M(Y,[["__scopeId","data-v-dbd713d0"]]);export{U as default};
